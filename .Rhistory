library(rvest)
rm(list = ls())
library(tidyverse)
library(magrittr)
library(janitor)
library(sf)
library(tmap)
library(rvest)
# remove.packages("dyadicdist")
# .rs.restartR()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
library(dyadicdist)
?ddist
df <- dyadicdist::cities %>%
st_as_sf(coords = c("longitude", "latitude"),
crs = 4326)
df2 <- dyadicdist::usa
class(df2)
st_crs(df)
tm_shape(df2) +
tm_polygons() +
tm_shape(df) +
tm_dots()
df <- readxl::read_xlsx("C:/Users/jevi/Downloads/worldcities.xlsx") %>%
rename(latitude = lat,
longitude = lng) %>%
select(c(city, country,
id,
latitude,
longitude)) %>%
distinct(., city, country,
.keep_all = TRUE) %>%
filter(country == "Japan") %>%
dplyr::rename(banana = id)
ddist(df)
ddist(df,
id = "id")
ddist(df,
id = "banana")
View(df)
dd <- ddist(df,
id = "banana")
rm(list = ls())
library(tidyverse)
library(magrittr)
library(janitor)
library(sf)
library(tmap)
library(rvest)
# remove.packages("dyadicdist")
# .rs.restartR()
# library(devtools)
# devtools::install_github("jvieroe/dyadicdist")
library(dyadicdist)
?ddist
df <- readxl::read_xlsx("C:/Users/jevi/Downloads/worldcities.xlsx") %>%
rename(latitude = lat,
longitude = lng) %>%
select(c(city, country,
id,
latitude,
longitude)) %>%
distinct(., city, country,
.keep_all = TRUE) %>%
filter(country == "Japan") %>%
dplyr::rename(banana = id)
dd <- ddist(df,
id = "banana")
View(dd)
library(devtools)
library(roxygen2)
document()
library(tidyverse)
library(dyadicdist)
df <- tibble::tribble(
~city_name, ~idvar, ~latitude, ~longitude,
"copenhagen", 5, 55.68, 12.58,
"stockholm", 2, 59.33, 18.07,
"oslo", 51, 59.91, 10.75
)
ddist(data = df,
id = "idvar")
cities <- dyadicdist::cities
usa <- dyadicdist::usa
library(sf)
city_sf <- cities %>%
st_as_sf(.,
coords = c("longitude", "latitude"),
crs = 4326)
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2,
shape = 21,
fill = "chartreuse3", color = "NA",
alpha = .55) +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
fill = "NA", color = "chartreuse3",
alpha = 1.0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ddist(cities,
id = "id")
new_crs <- 4326
new_crs %in% c(4326, 3359)
!new_crs %in% c(4326, 3359)
new_crs <- 4327
new_crs %in% c(4326, 3359)
!new_crs %in% c(4326, 3359)
class(dfsf)
rm(cities, city_sf, df, usa)
rm(new_crs)
library(devtools)
library(roxygen2)
document()
document()
library(tidyverse)
library(dyadicdist)
df <- tibble::tribble(
~city_name, ~idvar, ~latitude, ~longitude,
"copenhagen", 5, 55.68, 12.58,
"stockholm", 2, 59.33, 18.07,
"oslo", 51, 59.91, 10.75
)
ddist(data = df,
id = "idvar")
library(sf)
city_sf <- cities %>%
st_as_sf(.,
coords = c("longitude", "latitude"),
crs = 4326)
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2,
shape = 21,
fill = "chartreuse3", color = "NA",
alpha = .55) +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
fill = "NA", color = "chartreuse3",
alpha = 1.0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
city_sf <- cities %>%
st_as_sf(.,
coords = c("longitude", "latitude"),
crs = 4326)
ddist_sf(city_sf,
id = "id")
cities %>%
st_as_sf(.,
coords = c("longitude", "latitude"),
crs = 4326) %>%
ddist_sf(.,
id = "id")
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
fill = "chartreuse3", color = "chartreuse3",
stroke = 0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
alpha = .55,
fill = "chartreuse3",
color = "chartreuse3",
stroke = 0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
alpha = .55,
fill = "chartreuse3",
color = "chartreuse3") +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
alpha = .55,
fill = "chartreuse3",
color = "chartreuse3",
stroke = 1) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
alpha = .55,
fill = "chartreuse3",
color = "chartreuse3",
stroke = 3) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
alpha = .55,
fill = "chartreuse3",
color = "chartreuse3",
stroke = 0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2,
shape = 21,
fill = "chartreuse3", color = "NA",
alpha = .55) +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
fill = "NA", color = "chartreuse3",
alpha = 1.0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25",
color = "white") +
geom_sf(data = city_sf,
size = 2.5,
shape = 21,
alpha = .55,
fill = "chartreuse3",
color = "chartreuse3",
stroke = 0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
?alpha.f
library(tidyverse)
?alpha.f
ggplot() +
geom_sf(data = usa, fill = "grey25", color = "white") +
geom_sf(data = city_sf, size = 2.5, shape = 21, alpha = .55,
fill = "chartreuse3", color = "chartreuse3", stroke = 0) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa, fill = "grey25", color = "white") +
geom_sf(data = city_sf, size = 2.5, shape = 21, alpha = .55,
fill = "chartreuse3", color = "chartreuse3", stroke = 1) +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25", color = "white") +
geom_sf(data = city_sf,
size = 2, shape = 21, alpha = .55,
fill = "chartreuse3", color = "NA") +
geom_sf(data = city_sf,
size = 2.5, shape = 21, alpha = 1.0,
fill = "NA", color = "chartreuse3") +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
ggplot() +
geom_sf(data = usa,
fill = "grey25", color = "white") +
geom_sf(data = city_sf,
size = 2.5, shape = 21, alpha = .55,
fill = "chartreuse3", color = "NA") +
geom_sf(data = city_sf,
size = 2.5, shape = 21, alpha = 1.0,
fill = "NA", color = "chartreuse3") +
theme_void() +
theme(panel.background = element_rect(fill = "#0D1117"),
plot.background = element_rect(fill = "#0D1117"))
library(patchwork)
install.packages("patchwork")
library(patchwork)
library(devtools)
library(roxygen2)
document()
mtcars
library(devtools)
library(roxygen2)
usethis::use_pipe()
document()
library(devtools)
devtools::check()
?sort
library(devtools)
devtools::check()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
library(dyadicdist)
devtools::check()
?use_gpl3_license()
usethis::use_gpl3_license()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
devtools::check()
library()
library(roxygen2)
document()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
install.packages("rlang")
install.packages("rlang")
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
devtools::install_github("jvieroe/dyadicdist", force = T)
devtools::check()
library(roxygen2)
document()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
install.packages("cli")
install.packages("rlang")
install.packages("stringi")
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
devtools::install_github("jvieroe/dyadicdist", force = T)
devtools::check()
library(roxygen2)
document()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
devtools::check()
library(devtools)
library(roxygen2)
devtools::install_github("jvieroe/dyadicdist")
library(devtools)
devtools::install_github("jvieroe/dyadicdist", force = T)
document()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
check()
library(roxygen2)
document()
## code to prepare `cities` dataset goes here
library(tidyverse)
library(magrittr)
library(janitor)
library(rvest)
city_url <- "https://www.latlong.net/category/cities-236-15.html"
cities <- city_url %>%
read_html() %>%
html_nodes("table")
cities <- rbind(html_table(cities[[1]])) %>%
janitor::clean_names()
cities <- cities %>%
mutate(city = sapply(strsplit(as.character(cities$place_name),","), "[", 1),
state = sapply(strsplit(as.character(cities$place_name),","), "[", 2),
country = sapply(strsplit(as.character(cities$place_name),","), "[", 3)) %>%
select(-place_name)
cities <- cities %>%
mutate(id = base::sample.int((nrow(.)*5),
nrow(.),
replace = FALSE))
cities <- cities %>%
mutate(city = stringr::str_trim(city, side = "both"),
state = stringr::str_trim(state, side = "both"),
country = stringr::str_trim(country, side = "both"))
cities <- cities %>%
mutate(country = "USA") %>%
mutate(state = ifelse(state == "Illinois", "IL", state)) %>%
mutate(state = ifelse(state == "Il", "IL", state)) %>%
mutate(state = ifelse(state == "South Dakota", "SD", state))
usethis::use_data(cities, overwrite = TRUE, internal = TRUE)
## code to prepare `us` dataset goes here
library(sf)
library(rnaturalearth)
library(rgeos)
# get map data on  the US
usa <- rnaturalearth::ne_countries() %>%
sf::st_as_sf() %>%
filter(admin == "United States of America")
usa <- usa %>%
st_crop(.,
st_bbox(c(xmin = -128,
xmax = -57,
ymin = 20,
ymax = 50),
crs = st_crs(usa)))
usa <- usa %>%
select(sovereignt) %>%
rename(country_name = sovereignt)
usethis::use_data(usa, overwrite = TRUE, internal = TRUE)
document()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
library(dyadicdist)
dyadicdist::cities
check()
library(roxygen2)
document()
document()
library(devtools)
library(roxygen2)
devtools::install_github("jvieroe/dyadicdist")
check()
document()
library(devtools)
library(roxygen2)
install_github("jvieroe/dyadicdist")
check()
## code to prepare `cities` dataset goes here
library(tidyverse)
library(magrittr)
library(janitor)
library(rvest)
city_url <- "https://www.latlong.net/category/cities-236-15.html"
cities <- city_url %>%
read_html() %>%
html_nodes("table")
cities <- rbind(html_table(cities[[1]])) %>%
janitor::clean_names()
cities <- cities %>%
mutate(city = sapply(strsplit(as.character(cities$place_name),","), "[", 1),
state = sapply(strsplit(as.character(cities$place_name),","), "[", 2),
country = sapply(strsplit(as.character(cities$place_name),","), "[", 3)) %>%
select(-place_name)
cities <- cities %>%
mutate(id = base::sample.int((nrow(.)*5),
nrow(.),
replace = FALSE))
cities <- cities %>%
mutate(city = stringr::str_trim(city, side = "both"),
state = stringr::str_trim(state, side = "both"),
country = stringr::str_trim(country, side = "both"))
cities <- cities %>%
mutate(country = "USA") %>%
mutate(state = ifelse(state == "Illinois", "IL", state)) %>%
mutate(state = ifelse(state == "Il", "IL", state)) %>%
mutate(state = ifelse(state == "South Dakota", "SD", state))
usethis::use_data(cities, overwrite = TRUE, internal = FALSE)
## code to prepare `us` dataset goes here
library(sf)
library(rnaturalearth)
library(rgeos)
# get map data on  the US
usa <- rnaturalearth::ne_countries() %>%
sf::st_as_sf() %>%
filter(admin == "United States of America")
usa <- usa %>%
st_crop(.,
st_bbox(c(xmin = -128,
xmax = -57,
ymin = 20,
ymax = 50),
crs = st_crs(usa)))
usa <- usa %>%
select(sovereignt) %>%
rename(country_name = sovereignt)
usethis::use_data(usa, overwrite = TRUE, internal = FALSE)
document()
class(usa)
head(usa)
library(roxygen2)
document()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
check()
devtools::load_all()
roxygen2::roxygenise()
document()
library(devtools)
devtools::install_github("jvieroe/dyadicdist")
check()
